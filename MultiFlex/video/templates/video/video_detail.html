{% extends "base.html" %}
{% load widget_tweaks %} 

{% block title %}video_tail.html{% endblock %}

{% block content %}
<div class='container full-width'>
    <div>
        <iframe width="1000" height="480" src="{{ video.video_link }}" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
    </div>
    <div class="form-row float-right">
        <button type="button" class="btn btn-outline-danger">추천</button>
        <button type="button" class="btn btn-outline-danger">찜하기</button>
    </div>
    <div>
        <h1>{{video.title}} </h1>
        <h2>장르 : {{video.genre}} | 감독 : {{video.director}} | 개봉 일 : {{video.release_dt}} | 러닝타임 :
            {{video.running_time}}분
        </h2>
        <h3>{{video.description}}</h3>
    </div>

    {% for review in page_obj %}
    <h1>
        <li><a href='#'>{{review.re_title}} </a></li>
    </h1>
    (작성자 : {{review.user_id}})
    {{review.content|safe}}
        <button type="button" class="btn btn-info btn-sm">
            <a href="/review/{{ review.id }}/updateReview/">수정</a>
        </button>
        <button type="button" class="btn btn-danger btn-sm"> 
            <a href="/review/{{ review.id }}/deleteReview/">삭제</a>
        </button>
    {% endfor %}
    
    <br><br>
    <div>
        <span>
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">PreviousPage</a>
            {% endif %}
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">NextPage</a>
            {% endif %}
        </span>
    </div>

    <br><br>
    <!-- 여기서 부터 리뷰작성 부분 -->
    
    <div class="container">
        <h4>리뷰를 남겨주세요.</h4>
    {% if form.errors %} 
        <div class="alert alert-danger"> 
            <div class="font-weight-bold">
                Wrong! Please correct the error(s) below.</div> 
            {{ form.errors }} 
        </div> 
        {% endif %}
        <form action="." method="post" enctype="multipart/form-data" class="card pt-3">{% csrf_token %} 
            <div class="form-group row"> 
                {{ form.re_title|add_label_class:"col-form-label col-sm-2 ml-3 font-weight-bold" }} 
                <div class="col-sm-5"> 
                    {{ form.re_title|add_class:"form-control"|attr:"autofocus" }} 
                </div> 
            </div> 
            <div class="form-group row"> 
                {{ form.content|add_label_class:"col-form-label col-sm-2 ml-3 font-weight-bold" }} 
                <div class="col-sm-8"> 
                    {{ form.content|add_class:"form-control" }}
                </div> 
            </div>
            <div class="form-group"> 
                <div class="offset-sm-2 col-sm-5"> 
                    <input type="submit" value="Submit" class="btn btn-info"/> 
                </div> 
            </div>
        </form> 
    </div>
</div>
<br><br><br><br><br>
{% endblock %}

{% block extra-script %} 
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script> 
    <script> 
        tinymce.init({ selector:'textarea', menubar: false, statusbar: false, toolbar1: 'formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat' }); 
    </script>
{% endblock %}
